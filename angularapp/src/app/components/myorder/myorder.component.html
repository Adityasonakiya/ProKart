<div class="my-orders-container">
    <h1>My Orders</h1>
    <hr>
    <div class="order-cards">
        <div *ngFor="let order of orders" class="order-card">
            <p class="order-id"><strong>Order ID:</strong> {{ order.orderId }}</p>
            <p><strong>Status:</strong> {{ order.orderStatus }}</p>
            <p><strong>Total Amount:</strong> ₹{{ order.totalAmount }}</p>
            <p><strong>Billing Address:</strong> {{ order.billingAddress }}</p>
            <p><strong>Shipping Address:</strong> {{ order.shippingAddress }}</p>
            <p><strong>Order Date:</strong> {{ order.orderDate | date }}</p>
            <div class="product-items" *ngFor="let item of order.orderItems">
                <div class="product-item">
                    <p><strong>Product Name:</strong> {{ item.product.productName }}</p>
                    <p><strong>Quantity:</strong> {{ item.quantity }}</p>
                </div>
            </div>
            <div class="order-actions">
                <button class="track-order" (click)="trackOrder(order)">Track Order</button>
                <button class="view-items" (click)="viewItems(order)">View Items</button>
                <button class="cancel-order" [disabled]="order.orderStatus == 'outForDelivery' || order.orderStatus == 'Delivered'" (click)="confirmCancelOrder(order)">Cancel Order</button>
            </div>
        </div>
    </div>

    <!-- Track Order Modal -->
    <div *ngIf="showTrackModal" class="modal">
        <div class="modal-content">
            <button class="close-button" (click)="closeTrackModal()">×</button>
            <h2>Track Order Status</h2>
            <div class="status-steps">
                <div *ngFor="let status of orderStatuses" [ngClass]="{'active': orderStatuses.indexOf(status) <= orderStatuses.indexOf(selectedOrder.orderStatus)}">
                    {{ status }}
                </div>
            </div>
        </div>
    </div>

    <!-- View Items Modal -->
    <div *ngIf="showItemsModal" class="modal">
        <div class="modal-content">
            <button class="close-button" (click)="toggleItemsModal()">×</button>
            <h2>Order Items</h2>
            <div *ngFor="let item of selectedOrderItems" class="cart-item-card">
                <img [src]="item.product.coverImage" alt="{{ item.product.productName }}" class="item-image">
                <div class="item-details">
                    <p class="item-name"><strong>{{ item.product.productName }}</strong></p>
                    <p class="item-quantity">Quantity: {{ item.quantity }}</p>
                    <p class="item-price">Price: 
                        ₹{{ item.product.price }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cancel Order Modal -->
<div *ngIf="showCancelModal" class="modal">
    <div class="modal-content">
        <button class="close-button" (click)="toggleCancelModal()">×</button>
        <h2>Cancel Order</h2>
        <p>Are you sure you want to cancel this order?</p>
        <div class="modal-actions">
            <button class="confirm-button" (click)="cancelOrder(selectedOrder)">Yes</button>
            <button class="cancel-button" (click)="toggleCancelModal()">No</button>
        </div>
    </div>
</div>

</div>
